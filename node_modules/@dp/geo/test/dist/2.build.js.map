{"version":3,"sources":["webpack:///./~/@dp/dpapp/index.js","webpack:///./~/@dp/dpapp/lib/core.js","webpack:///./~/@dp/dpapp-core/lib/index.js","webpack:///./~/@dp/dpapp-core/lib/core.js","webpack:///./~/@dp/dpapp-core/lib/apis.js","webpack:///./~/@dp/dpapp-core/lib/decorate.js","webpack:///./~/promise/index.js","webpack:///./~/promise/lib/index.js","webpack:///./~/promise/lib/core.js","webpack:///./~/asap/browser-raw.js","webpack:///./~/promise/lib/done.js","webpack:///./~/promise/lib/finally.js","webpack:///./~/promise/lib/es6-extensions.js","webpack:///./~/promise/lib/node-extensions.js","webpack:///./~/asap/browser-asap.js","webpack:///./~/promise/lib/synchronous.js","webpack:///./~/@dp/dpapp-core/lib/native-core.js","webpack:///./~/@dp/dpapp-core/lib/queue.js","webpack:///./~/@dp/dpapp-core/lib/network.js","webpack:///./~/@dp/dpapp/lib/util/mixin.js","webpack:///./~/@dp/dpapp/lib/util.js","webpack:///./~/@dp/dpapp/lib/apis.js","webpack:///./~/@dp/dpapp/lib/errortrace.js","webpack:///./~/@dp/dpapp/lib/patch/patch-7.0.0.js","webpack:///./~/@dp/dpapp/lib/patch/patch-7.1.0.js","webpack:///./~/@dp/dpapp/lib/patch/patch-7.2.0.js","webpack:///./~/@dp/dpapp/lib/patch/patch-7.5.0.js","webpack:///./~/@dp/dpapp/lib/patch/patch-7.6.0.js","webpack:///./~/@dp/dpapp/lib/patch/patch-7.8.0.js","webpack:///./~/@dp/dpapp/lib/patch/patch-7.9.1.js","webpack:///./~/@dp/dpapp/lib/async.js","webpack:///./~/@dp/dpapp/lib/patch/patch-7.9.2.js","webpack:///./~/@dp/dpapp/lib/patch/patch-7.9.4.js","webpack:///./~/@dp/dpapp/lib/patch/patch-7.9.6.js","webpack:///./~/@dp/dpapp/lib/patch/patch-8.0.0.js","webpack:///./~/@dp/dpapp/lib/patch/patch-8.0.4.js","webpack:///./~/@dp/dpapp/lib/patch/patch-8.0.6.js","webpack:///./~/@dp/dpapp/lib/patch/patch-8.1.0.js","webpack:///./~/@dp/dpapp/lib/patch/patch-8.1.2.js","webpack:///./~/@dp/dpapp/lib/patch/patch-8.1.4.js","webpack:///./~/@dp/dpapp/lib/patch/patch-8.1.6.js","webpack:///./~/@dp/dpapp/lib/version.js","webpack:///./~/@dp/dpapp/lib/type.js"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA,EAAC,U;;;;;;ACxDD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,IAAG;AACH;AACA;AACA,qCAAoC;AACpC;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,wCAAuC,yBAAyB;AAChE;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,EAAC,E;;;;;;AClLD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uB;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA,2BAA0B;AAC1B;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qE;;;;;;ACjLA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACLA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,IAAG;AACH,E;;;;;;AC3FA;;AAEA;;;;;;;ACFA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACPA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sDAAqD,cAAc;AACnE;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;;;;;;ACpNA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAgE,kBAAkB;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B,oBAAoB;AAChD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC9NA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;;;;;;ACZA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA,MAAK;AACL,IAAG;AACH;;;;;;;ACfA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,iBAAiB;AACpC;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;;AAEA;AACA;AACA;;;;;;;AC1GA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA,yBAAwB;AACxB,cAAa,SAAS,EAAE,OAAO,SAAS,EAAE;AAC1C,KAAI;AACJ;AACA;AACA;AACA,kBAAiB,mBAAmB;AACpC;AACA;AACA;AACA,gDAA+C;AAC/C,sBAAqB;AACrB,4CAA2C;AAC3C;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,SAAQ,SAAS;AACjB,OAAM,EAAE;AACR,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,cAAc;AAC/B;AACA;AACA;AACA,gDAA+C;AAC/C,sBAAqB;AACrB,eAAc;AACd,uCAAsC;AACtC,gDAA+C;AAC/C,6CAA4C;AAC5C,qBAAoB,sBAAsB,OAAO;AACjD,6BAA4B;AAC5B,OAAM;AACN,OAAM;AACN,4CAA2C;AAC3C,kCAAiC;AACjC,cAAa;AACb,0BAAyB;AACzB;AACA;AACA;AACA,8FAA6F;AAC7F,gBAAe;AACf;AACA,MAAK;AACL;AACA,2BAA0B;AAC1B,iCAAgC;AAChC,OAAM;;AAEN;AACA;AACA;AACA,SAAQ,SAAS;AACjB,OAAM,EAAE;AACR,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA,MAAK;AACL,IAAG;AACH;;;;;;;ACjIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;;;;;;ACjEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7DA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;;AAEL,IAAG;AACH;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,SAAS;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,MAAK;;AAEL;;AAEA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oEAAmE;AACnE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,IAAG;AACH;AACA,eAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAqC,SAAS;AAC9C;AACA;AACA,qBAAoB;AACpB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,IAAG;;AAEH,sBAAqB;AACrB;AACA;AACA,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;AC1YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA,MAAK;AACL;AACA,E;;;;;;ACpIA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACLA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACjGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACjBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP,MAAK;AACL,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACpJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,YAAW;AACX;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA,YAAW;AACX;AACA;AACA;AACA,YAAW;AACX;;AAEA;AACA;AACA;AACA,UAAS,E;;AAET;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,cAAa;AACb;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA,YAAW;;AAEX;AACA;AACA,QAAO;AACP;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA,EAAC,E;;;;;;AC7SD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;AC1BA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,G;;;;;;ACrBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,IAAG;AACH,G;;;;;;AC9GA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC9BA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA,kBAAiB;AACjB;AACA;AACA;AACA,gBAAe;AACf,cAAa;AACb;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,kBAAiB;AACjB;AACA,cAAa;AACb,YAAW;AACX,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA,IAAG;AACH,G;;;;;;ACzEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA,G;;;;;;ACtBA;AACA;;AAEA;AACA;;AAEA;AACA,G;;;;;;ACPA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,G;;;;;;ACfA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,S;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,YAAW;AACX;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA,G;;;;;;AChEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,G;;;;;;ACXA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA,uC;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uB;;;;;;ACzFA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,G;;;;;;ACpBA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC9CA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;;AAEA,G;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AC/CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wB;;;;;;AC7CA,4B;;;;;;ACAA,6B","file":"2.build.js","sourcesContent":["'use strict';\n(function (Host) {\n  var core = require('./lib/core');\n  var util = require('./lib/util');\n  var apis = require('./lib/apis');\n\n  require('./lib/errortrace');\n\n  var patchVersion = function(version, patch) {\n    if (core.Semver.gte(util.appVersion, version)) {\n      core.patchForType(util.appVersion, patch);\n    }\n  };\n\n  patchVersion('7.0.0', require('./lib/patch/patch-7.0.0'));\n  patchVersion('7.1.0', require('./lib/patch/patch-7.1.0'));\n  patchVersion('7.2.0', require('./lib/patch/patch-7.2.0'));\n  patchVersion('7.5.0', require('./lib/patch/patch-7.5.0'));\n  patchVersion('7.6.0', require('./lib/patch/patch-7.6.0'));\n  patchVersion('7.8.0', require('./lib/patch/patch-7.8.0'));\n  patchVersion('7.9.1', require('./lib/patch/patch-7.9.1'));\n  patchVersion('7.9.2', require('./lib/patch/patch-7.9.2'));\n  patchVersion('7.9.4', require('./lib/patch/patch-7.9.4'));\n  patchVersion('7.9.6', require('./lib/patch/patch-7.9.6'));\n  patchVersion('8.0.0', require('./lib/patch/patch-8.0.0'));\n  patchVersion('8.0.4', require('./lib/patch/patch-8.0.4'));\n  patchVersion('8.0.6', require('./lib/patch/patch-8.0.6'));\n  patchVersion('8.1.0', require('./lib/patch/patch-8.1.0'));\n  patchVersion('8.1.2', require('./lib/patch/patch-8.1.2'));\n  patchVersion('8.1.4', require('./lib/patch/patch-8.1.4'));\n  patchVersion('8.1.6', require('./lib/patch/patch-8.1.6'));\n\n  core.apis = apis;\n  core.decorate();\n\n  apis.forEach(function (api) {\n    if (!core[api]) {\n      core[api] = core._notImplemented;\n    }\n  });\n\n  core.__version__ = require('./lib/version');\n  core.__type__ = require('./lib/type');\n  // Export DPApp object, if support AMD, CMD, CommonJS.\n  if (typeof module !== 'undefined') {\n    module.exports = core;\n  }\n  // Export DPApp object to Host\n  if (typeof Host !== 'undefined') {\n    if(Host.DPApp){\n      Host.DPApp = core.merge(Host.DPApp, core);\n    }else{\n      Host.DPApp = core;\n    }\n  }\n\n}(window));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/index.js\n// module id = 20\n// module chunks = 2 3","'use strict';\nvar Core = require('@dp/dpapp-core');\nvar mixin = require('./util/mixin');\nvar util = require('./util');\n\nvar NOOP = function(){};\n\nvar core = module.exports = new Core({\n  hippoPrefix:'dpapp',\n  getTypeFromUA: util.getWebviewVersion,\n  apis: [],\n  allowBeforeReady: ['getRequestId'],\n  isOldVersion: function(){\n    return this.uaType() == '6.9.x';\n  },\n  cache: {},\n  Share: {\n    WECHAT_FRIENDS: 0,\n    WECHAT_TIMELINE: 1,\n    QQ: 2,\n    SMS: 3,\n    WEIBO: 4,\n    QZONE: 5,\n    EMAIL: 6,\n    COPY: 7\n  },\n  _tidyUrlParams: function(url){\n    var splited = url.split('?');\n    var qs = splited[1];\n    var reserved = [];\n    if(!qs){\n      return splited[0];\n    }else{\n      qs.split('&').forEach(function(q){\n        var k = q.split('=')[0];\n        if(!/^(newtoken|token|product)$/.test(k) ){\n          reserved.push(q);\n        }\n      });\n      return [splited[0], reserved.join('&')].join('?');\n    }\n  },\n  _getEnv : function(callback) {\n    var self = this;\n    this._doSendMessage('getEnv', {}, function(env){\n      self.cache['env'] = env;\n      callback.call(this, env);\n    });\n  },\n  _captal: function(str) {\n    return str.slice(0, 1).toUpperCase() + str.slice(1);\n  },\n  _getBizName: function(opt) {\n    var fail = opt.fail;\n    var bizname = this._cfg.bizname;\n    if (!bizname) {\n      fail && fail('use `DPApp.config({bizname:\"<your-bizname>\"})` first');\n      return false;\n    } else {\n      return bizname;\n    }\n  },\n  isStatusOK : NOOP,\n  did_handle_callback : NOOP,\n  _doSendMessage: function (method, args, callback) {\n    var self = this;\n    var hasCallback = callback && typeof callback == 'function';\n    this.log('调用方法', method, args);\n\n    /**\n     * pass 0 as callbackId\n     * thus _callbacks[callbackId] is undefined\n     * nothing will happen\n     * @type {Number}\n     */\n    var callbackId = hasCallback ? this._generateCallbackId() : 0;\n    var callbackName = this._generateCallbackName(callbackId);\n\n    if (hasCallback){\n      window[callbackName] = callback;\n    }\n\n    /**\n     * check type for args\n     */\n    if(!args || typeof args !== 'object'){\n      args = {};\n    }\n\n    // 某些版本app很任性的把callbackId参数放到args里了\n    args.callbackId = callbackId;\n    args = JSON.stringify(args);\n\n    var _DPApp = window._DPApp;\n\n    var bridgeUrl = 'js://_?method=' + method + '&args=' + encodeURIComponent(args) + '&callbackId=' + callbackId;\n\n    this._sendMessage2Native(bridgeUrl);\n  },\n  _sendByPrompt: function(message) {\n    this.log('[Prompt] message: ' +message);\n    window.prompt(message);\n  },\n  _sendByIframe: function(message) {\n    this.log('[Iframe] message: ' + message);\n    this._createIframe(message);\n  },\n  _sendMessage2Native: function(message) {\n    var SUPPORTVERSION = '8.0.6';\n    if (this.Semver.gte(util.appVersion, SUPPORTVERSION) && util.osName === 'android') {\n      this._sendByPrompt(message);\n    }else{\n      this._sendByIframe(message);\n    }\n  },\n  _send: function(method, args){\n    args = args || {};\n    var self = this;\n    var _success = args.success;\n    var _fail = args.fail;\n    var _handle = args.handle;\n\n    var fail = function(result){\n      self.log('调用失败 ' + method, result);\n      _fail && _fail.call(self, result);\n    }\n\n    var success = function(result){\n      self.log('调用成功 ' + method, result);\n      _success && _success.call(self, result);\n    }\n\n    var handle = function(result){\n      self.log('回调 ' + method, result);\n      _handle && _handle.call(self, result);\n    }\n\n    var callback = (_success || _fail || _handle) ? function(result){\n      var status = result.status;\n\n      if(result.result != \"next\"){\n        delete result.result;\n      }\n      if(status == \"success\"){\n        success && success(result);\n      }else if(status == \"action\"){\n        handle && handle(result);\n      }else{\n        fail && fail(result);\n      }\n    } : null;\n    this._sendMessage(method, args, callback);\n  },\n  callback: function(callbackId, retValue){\n    var win = window;\n    var callbackFuncName = this._generateCallbackName(callbackId);\n    var callback = window[callbackFuncName];\n\n    if(callback){\n      this.log(\"[Callback] Id: \" + callbackId);\n      setTimeout(function(){\n        callback && callback.call(self,retValue);\n      });\n      if(retValue.result == \"complete\" || retValue.result == \"error\"){\n        win[callbackFuncName] = null;\n        delete win[callbackFuncName];\n      }\n    }\n  },\n  merge: function(core, newCore) {\n    if (core.__type__ === 'npm' || core.__type__ === 'cortex') {\n      console.warn('引入了多个DPApp,目前DPApp版本是',core.__version__,', 后续引入的DPApp无法生效');\n      return core;\n    }else{\n      console.warn('引入了多个DPApp,正在进行mixin形式的合并');\n      return mixin(core, newCore);\n    }\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/core.js\n// module id = 21\n// module chunks = 2 3","var Core = require('./core');\nvar NativeCore = require('./native-core');\nvar Network = require('./network');\nvar Promise = require('promise');\n\nCore.prototype._mixin(Core.prototype, NativeCore);\nCore.prototype._mixin(Core.prototype, Network);\nCore.prototype.all = function(list){\n\treturn Promise.all(list);\n};\nmodule.exports = Core;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp-core/lib/index.js\n// module id = 22\n// module chunks = 2 3","function mixin(to, from) {\n  for (var key in from) {\n    to[key] = from[key];\n  }\n  return to;\n}\n\nvar Core = module.exports = function(options){\n  options = options || {};\n  var self = this;\n  for(var key in options){\n    this[key] = options[key];\n  }\n\n\n  var apis = options.apis || require('./apis');\n  (options.extraApis || []).forEach(function(name){\n    if(apis.indexOf(name) === -1){\n      apis.push(name);\n    }\n  });\n\n  this.apis = apis;\n  this.allowBeforeReady = this.allowBeforeReady || [\"getRequestId\"];\n\n\n  apis.forEach(function(name) {\n    if(!self[name]){\n      self[name] = function(options) {\n        self._send(name, options);\n      }\n    }\n  });\n\n  this.decorate();\n};\n\nCore.prototype = {\n  _cfg: {\n    debug: false\n  },\n  _isProduct: !!location.href.match(\".dianping.com\"),\n  _isReady: false,\n  config: function(config) {\n    for(var key in config){\n      this._cfg[key] = config[key];\n    }\n  },\n  /**\n   * 是否为古早版本\n   */\n  isOldVersion: function(){\n    return false;\n  },\n  getQuery: function (){\n    var query = location.search.slice(1);\n    var ret = {};\n    query.split(\"&\").forEach(function(pair){\n      var splited = pair.split(\"=\");\n      ret[splited[0]] = splited[1];\n    });\n    return ret;\n  },\n  patchForType: function(version, patch){\n    if(this.uaType() == version){\n      this.extend(patch);\n      this.decorate();\n    }\n  },\n  decorate: require('./decorate'),\n  Semver: {\n    eq: function(a, b) {\n      return a === b;\n    },\n    gt: function(a, b) {\n      var splitedA = a ? a.split(\".\") : [];\n      var splitedB = b ? b.split(\".\") : [];\n      [0,1,2].forEach(function(i){\n        splitedA[i] = splitedA[i] || 0;\n        splitedB[i] = splitedB[i] || 0;\n      });\n      if (+splitedA[0] !== +splitedB[0]) {\n        return +splitedA[0] > +splitedB[0];\n      } else {\n        if (+splitedA[1] !== +splitedB[1]) {\n          return +splitedA[1] > +splitedB[1];\n        } else {\n          return +splitedA[2] > +(splitedB[2] || 0);\n        }\n      }\n    },\n    lt: function(a, b) {\n      return !this.gte(a, b);\n    },\n    gte: function(a, b) {\n      return this.eq(a, b) || this.gt(a, b);\n    },\n    lte: function(a, b) {\n      return this.eq(a, b) || this.lt(a, b);\n    }\n  },\n  _parseUA: function(ua){\n    var osName, osVersion, versionMatch;\n    if (ua.match(/iPhone/)) {\n      osName = \"iphone\";\n      osVersion = ua.match(/iPhone\\sOS\\s([\\d_]+)/i)[1].replace(/_/g, \".\");\n    } else if (ua.match(/Android/)) {\n      osName = \"android\";\n      versionMatch = ua.match(/Android[\\s|\\/]([\\w\\.]+)/);\n      osVersion = versionMatch && versionMatch[1];\n    } else {\n      osName = null;\n      osVersion = null;\n    }\n    return {\n      name: osName,\n      version: osVersion\n    }\n  },\n  getTypeFromUA: function(userAgent){\n    return /dp\\/com\\.dianping\\.(\\w+)\\//.test(userAgent)\n      ? userAgent.match(/dp\\/com\\.dianping\\.(\\w+)\\//)[1]\n      : \"web\"\n  },\n  uaType: function(){\n    return this.getTypeFromUA(navigator.userAgent);\n  },\n  _trace: function(name, params){\n    if(!this.hippoPrefix){return;}\n    var logFact = (this._cfg && this._cfg.logFact) || 0.05;\n    params = params || {};\n    params = this._mixin(params, {\n      module: this.hippoPrefix + \"_\" + name\n    });\n    if(Math.random() < logFact){\n      console.log(\"_trace\", name)\n      window._hip && _hip.push(['mv', params]);\n    }\n  },\n  log: function() {\n\n    var message = [];\n    for(var i=0; i < arguments.length; i++){\n      if(typeof arguments[i] == \"string\"){\n        message.push(arguments[i]);\n      }else if(arguments[i] != undefined){\n        message.push(JSON.stringify(arguments[i]));\n      }\n    }\n\n    message = message.join(\" \");\n    if (this._cfg && this._cfg.debug) {\n      setTimeout(function(){\n        alert(message);\n      });\n    }else{\n      console.log(message);\n    }\n  },\n  _mixin: mixin,\n  extend: function(args) {\n    return this._mixin(this, args);\n  },\n  _notImplemented: function notImplemented(opt) {\n    opt && opt.fail && opt.fail({\n      errMsg:\"ERR_NOT_IMPLEMENTED\"\n    });\n  },\n  isSupport: function(funcName) {\n    var api = this[funcName];\n    return !!(api\n      && typeof api == \"function\"\n      && api != this._notImplemented\n      && api._notReady != true)\n  }\n};\n\nCore.prototype._osUA = Core.prototype._parseUA(navigator.userAgent);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp-core/lib/core.js\n// module id = 23\n// module chunks = 2 3","module.exports = [\n  \"getVersion\", \"getNetworkType\", \"getContactList\", \"pickContact\",\n  \"getRequestId\", \"getDeviceInfo\", \"clearStorage\", \"store\", \"retrieve\", \"publish\", \"subscribe\", \"unsubscribe\", \"openScheme\", \"jumpToScheme\", \"closeWindow\", \"sendSMS\",\n  \"downloadImage\", \"setBackgroundColor\", \"setTitle\", \"setLLButton\", \"setLRButton\", \"setRLButton\", \"setRRButton\", \"isInstalledApp\",\n  \"alert\", \"prompt\", \"confirm\", \"actionSheet\"\n];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp-core/lib/apis.js\n// module id = 24\n// module chunks = 2 3","var Promise = require('promise');\n\nmodule.exports = function (allowBeforeReady){\n  var target = this;\n  var apis = this.apis;\n  var allowBeforeReady = this.allowBeforeReady;\n\n  apis.forEach(function(name){\n    if(!target[name]){\n      target[name] = target._notImplemented;\n    }\n  });\n\n  apis.forEach(function(api){\n    var _origin = target[api];\n    if(target[api] && target[api]._decorated){\n      return;\n    }\n    target[api] = function(args){\n      var _args = target._mixin({}, args);\n      target._trace(api + \"_call\");\n      var _success = _args.success;\n      var _fail = _args.fail;\n      var _wrapped_fail = function(result){\n        if(!_fail){\n          if(target.onerror){\n            target.onerror({\n              api: api,\n              err: result\n            });\n          }else{\n            var errorMessage = result.errMsg ? result.errMsg : JSON.stringify(result);\n            var err = new Error(errorMessage);\n            err.name = \"DPAppError\";\n            console.warn(\"`DPApp.\" + api + \"` call faild\");\n            target._trace('throw');\n            console.warn(new Error(err));\n          }\n        }else{\n          _fail(result);\n        }\n      }\n      var zero = +new Date;\n      _args.success = function(result){\n        target._trace(api + \"_success\", {\n          time: +new Date - zero,\n        });\n        _success && _success(result);\n      };\n      _args.fail = function(result){\n        var note = {};\n        note.args = args;\n        note.result = result;\n        target._trace(api + \"_fail\", {\n          time: +new Date - zero,\n          note: JSON.stringify(note)\n        });\n        _wrapped_fail(result);\n      }\n\n      if(!this._isReady\n        && allowBeforeReady.indexOf(api) === -1\n        && !target._isProduct // 非正式环境\n        && target.isOldVersion() // 且非新版本，为了判断环境，必须wrap在DPApp.ready中\n      ){\n        _wrapped_fail(\"use `DPApp.ready(fn)` to wrap api calls\");\n        return;\n      }\n\n      return new Promise(function(resolve, reject){\n        var origin_success = _args.success;\n        var origin_fail = _args.fail;\n        var success = function(result){\n          origin_success(result);\n          resolve(result);\n        }\n        var fail = function(result){\n          origin_fail(result);\n          if(!_fail){\n            reject(result);\n          }\n        }\n        _args.success = success;\n        _args.fail = fail;\n        _origin.call(target, _args);\n      });\n    }\n    target[api]._decorated = true;\n    target[api]._notReady = _origin == target._notImplemented;\n\n  });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp-core/lib/decorate.js\n// module id = 25\n// module chunks = 2 3","'use strict';\n\nmodule.exports = require('./lib')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/index.js\n// module id = 26\n// module chunks = 2 3","'use strict';\n\nmodule.exports = require('./core.js');\nrequire('./done.js');\nrequire('./finally.js');\nrequire('./es6-extensions.js');\nrequire('./node-extensions.js');\nrequire('./synchronous.js');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/index.js\n// module id = 27\n// module chunks = 2 3","'use strict';\n\nvar asap = require('asap/raw');\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('not a function');\n  }\n  this._45 = 0;\n  this._81 = 0;\n  this._65 = null;\n  this._54 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._10 = null;\nPromise._97 = null;\nPromise._61 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n};\nfunction handle(self, deferred) {\n  while (self._81 === 3) {\n    self = self._65;\n  }\n  if (Promise._10) {\n    Promise._10(self);\n  }\n  if (self._81 === 0) {\n    if (self._45 === 0) {\n      self._45 = 1;\n      self._54 = deferred;\n      return;\n    }\n    if (self._45 === 1) {\n      self._45 = 2;\n      self._54 = [self._54, deferred];\n      return;\n    }\n    self._54.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._81 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._81 === 1) {\n        resolve(deferred.promise, self._65);\n      } else {\n        reject(deferred.promise, self._65);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._65);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._81 = 3;\n      self._65 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._81 = 1;\n  self._65 = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._81 = 2;\n  self._65 = newValue;\n  if (Promise._97) {\n    Promise._97(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._45 === 1) {\n    handle(self, self._54);\n    self._54 = null;\n  }\n  if (self._45 === 2) {\n    for (var i = 0; i < self._54.length; i++) {\n      handle(self, self._54[i]);\n    }\n    self._54 = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  })\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/core.js\n// module id = 28\n// module chunks = 2 3","\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/asap/browser-raw.js\n// module id = 29\n// module chunks = 2 3","'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.prototype.done = function (onFulfilled, onRejected) {\n  var self = arguments.length ? this.then.apply(this, arguments) : this;\n  self.then(null, function (err) {\n    setTimeout(function () {\n      throw err;\n    }, 0);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/done.js\n// module id = 30\n// module chunks = 2 3","'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.prototype['finally'] = function (f) {\n  return this.then(function (value) {\n    return Promise.resolve(f()).then(function () {\n      return value;\n    });\n  }, function (err) {\n    return Promise.resolve(f()).then(function () {\n      throw err;\n    });\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/finally.js\n// module id = 31\n// module chunks = 2 3","'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._61);\n  p._81 = 1;\n  p._65 = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._81 === 3) {\n            val = val._65;\n          }\n          if (val._81 === 1) return res(i, val._65);\n          if (val._81 === 2) reject(val._65);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/es6-extensions.js\n// module id = 32\n// module chunks = 2 3","'use strict';\n\n// This file contains then/promise specific extensions that are only useful\n// for node.js interop\n\nvar Promise = require('./core.js');\nvar asap = require('asap');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nPromise.denodeify = function (fn, argumentCount) {\n  if (\n    typeof argumentCount === 'number' && argumentCount !== Infinity\n  ) {\n    return denodeifyWithCount(fn, argumentCount);\n  } else {\n    return denodeifyWithoutCount(fn);\n  }\n}\n\nvar callbackFn = (\n  'function (err, res) {' +\n  'if (err) { rj(err); } else { rs(res); }' +\n  '}'\n);\nfunction denodeifyWithCount(fn, argumentCount) {\n  var args = [];\n  for (var i = 0; i < argumentCount; i++) {\n    args.push('a' + i);\n  }\n  var body = [\n    'return function (' + args.join(',') + ') {',\n    'var self = this;',\n    'return new Promise(function (rs, rj) {',\n    'var res = fn.call(',\n    ['self'].concat(args).concat([callbackFn]).join(','),\n    ');',\n    'if (res &&',\n    '(typeof res === \"object\" || typeof res === \"function\") &&',\n    'typeof res.then === \"function\"',\n    ') {rs(res);}',\n    '});',\n    '};'\n  ].join('');\n  return Function(['Promise', 'fn'], body)(Promise, fn);\n}\nfunction denodeifyWithoutCount(fn) {\n  var fnLength = Math.max(fn.length - 1, 3);\n  var args = [];\n  for (var i = 0; i < fnLength; i++) {\n    args.push('a' + i);\n  }\n  var body = [\n    'return function (' + args.join(',') + ') {',\n    'var self = this;',\n    'var args;',\n    'var argLength = arguments.length;',\n    'if (arguments.length > ' + fnLength + ') {',\n    'args = new Array(arguments.length + 1);',\n    'for (var i = 0; i < arguments.length; i++) {',\n    'args[i] = arguments[i];',\n    '}',\n    '}',\n    'return new Promise(function (rs, rj) {',\n    'var cb = ' + callbackFn + ';',\n    'var res;',\n    'switch (argLength) {',\n    args.concat(['extra']).map(function (_, index) {\n      return (\n        'case ' + (index) + ':' +\n        'res = fn.call(' + ['self'].concat(args.slice(0, index)).concat('cb').join(',') + ');' +\n        'break;'\n      );\n    }).join(''),\n    'default:',\n    'args[argLength] = cb;',\n    'res = fn.apply(self, args);',\n    '}',\n    \n    'if (res &&',\n    '(typeof res === \"object\" || typeof res === \"function\") &&',\n    'typeof res.then === \"function\"',\n    ') {rs(res);}',\n    '});',\n    '};'\n  ].join('');\n\n  return Function(\n    ['Promise', 'fn'],\n    body\n  )(Promise, fn);\n}\n\nPromise.nodeify = function (fn) {\n  return function () {\n    var args = Array.prototype.slice.call(arguments);\n    var callback =\n      typeof args[args.length - 1] === 'function' ? args.pop() : null;\n    var ctx = this;\n    try {\n      return fn.apply(this, arguments).nodeify(callback, ctx);\n    } catch (ex) {\n      if (callback === null || typeof callback == 'undefined') {\n        return new Promise(function (resolve, reject) {\n          reject(ex);\n        });\n      } else {\n        asap(function () {\n          callback.call(ctx, ex);\n        })\n      }\n    }\n  }\n}\n\nPromise.prototype.nodeify = function (callback, ctx) {\n  if (typeof callback != 'function') return this;\n\n  this.then(function (value) {\n    asap(function () {\n      callback.call(ctx, null, value);\n    });\n  }, function (err) {\n    asap(function () {\n      callback.call(ctx, err);\n    });\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/node-extensions.js\n// module id = 33\n// module chunks = 2 3","\"use strict\";\n\n// rawAsap provides everything we need except exception management.\nvar rawAsap = require(\"./raw\");\n// RawTasks are recycled to reduce GC churn.\nvar freeTasks = [];\n// We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n    if (pendingErrors.length) {\n        throw pendingErrors.shift();\n    }\n}\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nmodule.exports = asap;\nfunction asap(task) {\n    var rawTask;\n    if (freeTasks.length) {\n        rawTask = freeTasks.pop();\n    } else {\n        rawTask = new RawTask();\n    }\n    rawTask.task = task;\n    rawAsap(rawTask);\n}\n\n// We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\nfunction RawTask() {\n    this.task = null;\n}\n\n// The sole purpose of wrapping the task is to catch the exception and recycle\n// the task object after its single use.\nRawTask.prototype.call = function () {\n    try {\n        this.task.call();\n    } catch (error) {\n        if (asap.onerror) {\n            // This hook exists purely for testing purposes.\n            // Its name will be periodically randomized to break any code that\n            // depends on its existence.\n            asap.onerror(error);\n        } else {\n            // In a web browser, exceptions are not fatal. However, to avoid\n            // slowing down the queue of pending tasks, we rethrow the error in a\n            // lower priority turn.\n            pendingErrors.push(error);\n            requestErrorThrow();\n        }\n    } finally {\n        this.task = null;\n        freeTasks[freeTasks.length] = this;\n    }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/asap/browser-asap.js\n// module id = 34\n// module chunks = 2 3","'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.enableSynchronous = function () {\n  Promise.prototype.isPending = function() {\n    return this.getState() == 0;\n  };\n\n  Promise.prototype.isFulfilled = function() {\n    return this.getState() == 1;\n  };\n\n  Promise.prototype.isRejected = function() {\n    return this.getState() == 2;\n  };\n\n  Promise.prototype.getValue = function () {\n    if (this._81 === 3) {\n      return this._65.getValue();\n    }\n\n    if (!this.isFulfilled()) {\n      throw new Error('Cannot get a value of an unfulfilled promise.');\n    }\n\n    return this._65;\n  };\n\n  Promise.prototype.getReason = function () {\n    if (this._81 === 3) {\n      return this._65.getReason();\n    }\n\n    if (!this.isRejected()) {\n      throw new Error('Cannot get a rejection reason of a non-rejected promise.');\n    }\n\n    return this._65;\n  };\n\n  Promise.prototype.getState = function () {\n    if (this._81 === 3) {\n      return this._65.getState();\n    }\n    if (this._81 === -1 || this._81 === -2) {\n      return 0;\n    }\n\n    return this._81;\n  };\n};\n\nPromise.disableSynchronous = function() {\n  Promise.prototype.isPending = undefined;\n  Promise.prototype.isFulfilled = undefined;\n  Promise.prototype.isRejected = undefined;\n  Promise.prototype.getValue = undefined;\n  Promise.prototype.getReason = undefined;\n  Promise.prototype.getState = undefined;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/synchronous.js\n// module id = 35\n// module chunks = 2 3","/**\n * count from 1\n * @type {Number}\n */\nvar _events = {};\n/**\n * mapping for all callbacks\n * @type {Object}\n */\nvar pageEvents = [\"appear\", \"disappear\"];\nvar queue = require('./queue');\nvar q = queue(function(data){\n  DPApp._doSendMessage(data.method, data.args, data.callback);\n});\n\nmodule.exports = {\n\t_dequeueTimeout: null,\n  _messageQueue : q,\n  dequeue: function(){\n    var self = this;\n    setTimeout(function(){\n      DPApp && DPApp.log && DPApp.log(\"Dequeue\");\n      clearTimeout(this._dequeueTimeout);\n      self._dequeueTimeout = null;\n      q.dequeue();\n    }, 0);\n  },\n  ready: function(callback){\n    var self = this;\n    this._send(\"ready\", {\n      success: function(){\n        self._isReady = true;\n        callback();\n      }\n    });\n  },\n  openScheme: function(opt){\n    var url = opt.url;\n    var extra = opt.extra;\n    if(extra){\n      url += \"?\" + this._convertUrlParams(extra);\n      delete opt.extra;\n      opt.url = url;\n    }\n    this._send('openScheme', opt);\n  },\n  _sendMessage: function(method, args, callback){\n    var self = this;\n    q.push({\n      method: method,\n      args: args,\n      callback: callback\n    });\n    this._dequeueTimeout = setTimeout(function(){\n      self.dequeue();\n    },1000);\n\n  },\n  // _generateCallbackId: function(){\n  //   var rand = Math.floor(Math.random() * 1000);\n  //   var timestamp = +new Date();\n  //   return +(timestamp + \"\" + rand);\n  // },\n  _generateCallbackId: function () {\n    var rand = Math.floor(Math.random() * 1000);\n    var timestampStr = +new Date() + '';\n    //在DPAPP老版本中callbackId为int型，故只选取8位\n    var timestamp = timestampStr.substr(timestampStr.length - 5, 5);\n    return +(timestamp + \"\" + rand);\n  },\n  _generateCallbackName: function(callbackId){\n    return \"DPApp_callback_\" + callbackId;\n  },\n  /**\n   * send message to native\n   * @param  {String}   method\n   * @param  {Object}   args\n   * @param  {Function} callback\n   */\n  _doSendMessage: function (method, args, callback) {\n      var hasCallback = callback && typeof callback == 'function';\n      this.log('调用方法', method, args);\n\n      /**\n       * pass 0 as callbackId\n       * thus _callbacks[callbackId] is undefined\n       * nothing will happen\n       * @type {Number}\n       */\n      var callbackId = hasCallback ? this._generateCallbackId() : 0;\n      \n      if (hasCallback){\n        window[this._generateCallbackName(callbackId)] = callback;\n      }\n\n      /**\n       * check type for args\n       */\n      if(!args || typeof args !== 'object'){\n        args = {};\n      }\n\n      // 某些版本app很任性的把callbackId参数放到args里了\n      args.callbackId = callbackId;\n      args = JSON.stringify(args);\n\n      var bridgeUrl = 'js://_?method=' + method + '&args=' + encodeURIComponent(args) + '&callbackId=' + callbackId;\n\n      this.log('创建iframe ' + method, \"callbackId:\" + callbackId);\n      this._createIframe(bridgeUrl);\n  },\n  _createNode: function(src, type){\n    /**\n     * create node\n     * and native will intercept and handle the process\n     */\n    var node = document.createElement(type);\n    node.style.display = 'none';\n\n    function removeNode(){\n      node.onload = node.onerror = null;\n      node.parentNode && node.parentNode.removeChild(node);\n    }\n    /**\n     * remove node after loaded\n     */\n    node.onload = node.onerror = removeNode;\n    setTimeout(removeNode, 5000);\n    node.src = src;\n    document.body.appendChild(node);\n  },\n  _createIframe: function(src){\n    this._createNode(src, \"iframe\");\n  },\n  _send: function(method, args){\n    args = args || {};\n    var self = this;\n    var _success = args.success;\n    var _fail = args.fail;\n    var _handle = args.handle;\n\n    var fail = function(result){\n      self.log('调用失败 ' + method, result);\n      _fail && _fail.call(self, result);\n    }\n\n    var success = function(result){\n      self.log('调用成功 ' + method, result);\n      _success && _success.call(self, result);\n    }\n\n    var handle = function(result){\n      self.log('回调 ' + method, result);\n      _handle && _handle.call(self, result);\n    }\n\n    var callback = (_success || _fail || _handle) ? function(result){\n      var status = result.status;\n      if(result.result != \"next\"){\n        delete result.result;\n      }\n      if(status == \"success\"){\n        success && success(result);\n      }else if(status == \"action\"){\n        handle && handle(result);\n      }else{\n        fail && fail(result);\n      }\n    } : null;\n\n    this._sendMessage(method, args, callback);\n\n  },\n\n  _convertUrlParams: function(params){\n    var result = [];\n    for(var i in params){\n      result.push(i + \"=\" + encodeURIComponent(params[i]));\n    }\n    return result.join(\"&\");\n  },\n  _sanitizeAjaxOpts: function(args){\n    args.method = args.method || \"get\";\n    args.data = args.data || \"\";\n    var url = args.url;\n    var data = args.data;\n\n    if (args.method == \"get\") {\n      var params = [];\n      for (var p in data) {\n        if (data.hasOwnProperty(p) && (data[p] || data[p] === 0)) {  // allow `something=0' param\n          params.push(p + '=' + encodeURIComponent(data[p]));\n        }\n      }\n\n      if (params.length) {\n        url += url.indexOf('?') == -1 ? \"?\" : \"&\";\n        url += params.join('&');\n      }\n      args.url = url;\n      delete args.data;\n    }\n    return args;\n  },\n  _parseFeed: function(f){\n    var feed;\n    if (!f) {\n      return 0xff;\n    } else if (f.constructor.toString().indexOf(\"Array\") >= 0) {\n      feed = [0, 0, 0, 0, 0, 0, 0, 0];\n      f.forEach(function(pos) {\n        feed[7 - pos] = 1;\n      });\n      return parseInt(feed.join(\"\"), 2);\n    }\n  },\n  _transModel: function(keys, obj){\n    if(!keys){return obj;}\n    var keymap = {};\n\n    function getHash(str) {\n      var hashCode = function(str) {\n        var hash = 0,\n          i, chr, len;\n        if (str.length == 0) return hash;\n        for (i = 0, len = str.length; i < len; i++) {\n          chr = str.charCodeAt(i);\n          hash = ((hash << 5) - hash) + chr;\n          hash |= 0; // Convert to 32bit integer\n        }\n        return hash;\n      };\n\n      var i = hashCode(str);\n      return \"0x\" + ((0xFFFF & i) ^ (i >>> 16)).toString(16);\n    }\n\n    function generateKeys(keys) {\n      keys.forEach(function(key) {\n        keymap[getHash(key)] = key;\n      });\n    }\n\n    function isArray(val) {\n      return Object.prototype.toString.call(val) == \"[object Array]\";\n    }\n\n    function isObject(val) {\n      return Object.prototype.toString.call(val) == \"[object Object]\";\n    }\n\n    function translate(obj){\n      if (isObject(obj)) {\n        delete obj.__name;\n        for (var key in obj) {\n          var val;\n          if (keymap[key]) {\n            val = obj[keymap[key]] = obj[key];\n            translate(val);\n            delete obj[key];\n          }\n        }\n      } else if (isArray(obj)) {\n        obj.forEach(function(item) {\n          translate(item);\n        });\n      }\n      return obj;\n    }\n\n    keys.forEach(function(key) {\n      keymap[getHash(key)] = key;\n    });\n\n    return translate(obj);\n  },\n  _capital: function(str){\n    return str.slice(0,1).toUpperCase() + str.slice(1);\n  },\n  subscribe : function(opt) {\n    var self = this;\n    var name = opt.action;\n    var success = opt.success;\n    var handle = opt.handle;\n    var messageName;\n\n    function mainHandler(e){\n      _events[name] && _events[name].length && _events[name].forEach(function(func) {\n        func && func(e);\n      });\n    }\n\n    function registerPageEvents(){\n      if(messageName){\n        self[messageName] = mainHandler;\n        opt.success && opt.success();\n      }\n    }\n\n    if (_events[name]) {\n      opt.success && opt.success();\n      _events[name].push(handle);\n    } else {\n      if(pageEvents.indexOf(name) != -1){\n        messageName = \"on\" + self._capital(name);\n        if(name == 'scroll'){\n          // 仅scroll事件需要toggle开关\n          this._send(messageName, {\n            success: registerPageEvents\n          });\n        }else{\n          // 不然就直接注册上了\n          registerPageEvents();\n        }\n      }else{\n        this._send(\"subscribe\", {\n          action: name,\n          success: opt.success,\n          handle: mainHandler\n        });\n      }\n\n      _events[name] = [handle];\n    }\n  },\n\n  unsubscribe : function(opt) {\n    var name = opt.action;\n    var success = opt.success;\n    var handle = opt.handle;\n    var self = this;\n\n    var index = _events[name] ? _events[name].indexOf(handle) : -1;\n\n    function unregisterPageEvents(){\n      self[callbackName] = NOOP;\n    }\n\n    if (index != -1) {\n      _events[name].splice(index, 1);\n      success && success();\n      if(!_events[name].length){\n        _events[name] = null;\n      }\n    }else if(!handle){\n      _events[name] = null;\n    }\n\n    if(!_events[name]){\n      // unregister\n      // if is page event\n      if(pageEvents.indexOf(name) != -1 && after7_6){\n        var messageName = \"off\" + self._capital(name);\n        var callbackName = \"on\" + self._capital(name);\n        // 与安卓确认\n        if(name == 'scroll'){\n          this._send(messageName, {\n            success: unregisterPageEvents\n          });\n        }else{\n          unregisterPageEvents();\n        }\n      }else{\n        this._send(\"unsubscribe\", {\n          action: name,\n          success: success\n        });\n      }\n    }\n    // if not found, remove all;\n  },\n\n  getUA: function(){},\n  /**\n   * callback function to be invoked from native\n   * @param  {Number} callbackId\n   * @param  {Object} retValue\n   */\n  callback: function(callbackId, retValue){\n    var win = window;\n    var callbackFuncName = this._generateCallbackName(callbackId);\n    var callback = window[callbackFuncName];\n\n    if(callback){\n      this.log(\"触发回调 \", \"callbackId:\" + callbackId);\n      setTimeout(function(){\n        callback && callback.call(self,retValue);\n      });\n      if(retValue.result == \"complete\" || retValue.result == \"error\"){\n        win[callbackFuncName] = null;\n        delete win[callbackFuncName];\n      }\n    }\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp-core/lib/native-core.js\n// module id = 36\n// module chunks = 2 3","var queue = module.exports = function(worker){\n\tvar currentData = null;\n\tvar currentCallback = null;\n\tvar q = {\n\t\ttimeout: null,\n\t\trunning : false,\n\t\ttasks: [],\n\t\tpush: function(data, cb){\n\t\t\tvar callback = cb || function(data){}\n\t\t\tq.tasks.push({\n\t\t\t\tdata: data,\n\t\t\t\tcallback: callback\n\t\t\t});\n\t\t\tsetTimeout(function(){\n\t\t\t\tq.process();\n\t\t\t}, 0);\n\t\t},\n\t\tdequeue: function(){\n\t\t\tif(currentCallback){\n\t\t\t\tcurrentCallback();\n\t\t\t}else{\n\t\t\t\tq.running = false;\n\t\t\t}\n\t\t},\n\t\tprocess: function(){\n\t\t\tif(q.tasks.length && !q.running){\n\t\t\t\tvar task = q.tasks.shift();\n\t\t\t\tq.running = true;\n\t\t\t\tcurrentCallback = function(){\n\t\t\t\t\tq.running = false;\n\t\t\t\t\ttask.callback(task.data);\n\t\t\t\t\tq.process();\n\t\t\t\t};\n\t\t\t\tcurrentData = task.data;\n\t\t\t\tworker(task.data, currentCallback);\n\t\t\t}\n\t\t}\n\t}\n\treturn q;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp-core/lib/queue.js\n// module id = 37\n// module chunks = 2 3","module.exports = {\n  _iOSNetworkType: function (result) {\n    var networkType;\n    var types = {\n      kSCNetworkReachabilityFlagsTransientConnection: 1 << 0,\n      kSCNetworkReachabilityFlagsReachable: 1 << 1,\n      kSCNetworkReachabilityFlagsConnectionRequired: 1 << 2,\n      kSCNetworkReachabilityFlagsConnectionOnTraffic: 1 << 3,\n      kSCNetworkReachabilityFlagsInterventionRequired: 1 << 4,\n      kSCNetworkReachabilityFlagsConnectionOnDemand: 1 << 5,\n      kSCNetworkReachabilityFlagsIsLocalAddress: 1 << 16,\n      kSCNetworkReachabilityFlagsIsDirect: 1 << 17,\n      kSCNetworkReachabilityFlagsIsWWAN: 1 << 18\n    };\n    var type = +result.type;\n    var subType = result.subType;\n    var returnValue;\n    // 2g, 3g, 4g\n    function getMobileType(subType) {\n      switch (subType) {\n        case \"CTRadioAccessTechnologyGPRS\":\n        case \"CTRadioAccessTechnologyEdge\":\n        case \"CTRadioAccessTechnologyCDMA1x\":\n          return \"2g\";\n        case \"CTRadioAccessTechnologyLTE\":\n          return \"4g\";\n        case \"CTRadioAccessTechnologyWCDMA\":\n        case \"CTRadioAccessTechnologyHSDPA\":\n        case \"CTRadioAccessTechnologyHSUPA\":\n        case \"CTRadioAccessTechnologyCDMA1x\":\n        case \"CTRadioAccessTechnologyCDMAEVDORev0\":\n        case \"CTRadioAccessTechnologyCDMAEVDORevA\":\n        case \"CTRadioAccessTechnologyCDMAEVDORevB\":\n        case \"CTRadioAccessTechnologyeHRPD\":\n          return \"3g\";\n      }\n    }\n\n    if ((type & types.kSCNetworkReachabilityFlagsReachable) == 0) {\n      return \"none\";\n    }\n\n    if ((type & types.kSCNetworkReachabilityFlagsConnectionRequired) == 0) {\n      // if target host is reachable and no connection is required\n      //  then we'll assume (for now) that your on Wi-Fi\n      returnValue = \"wifi\";\n    }\n\n\n    if (\n      (type & types.kSCNetworkReachabilityFlagsConnectionOnDemand) != 0\n      ||\n      (type & types.kSCNetworkReachabilityFlagsConnectionOnTraffic) != 0\n    ) {\n      // ... and the connection is on-demand (or on-traffic) if the\n      //     calling application is using the CFSocketStream or higher APIs\n      if ((type & types.kSCNetworkReachabilityFlagsInterventionRequired) == 0) {\n        // ... and no [user] intervention is needed\n        returnValue = \"wifi\";\n      }\n    }\n\n    if ((type & types.kSCNetworkReachabilityFlagsIsWWAN) == types.kSCNetworkReachabilityFlagsIsWWAN) {\n      // ... but WWAN connections are OK if the calling application\n      //     is using the CFNetwork (CFSocketStream?) APIs.\n      returnValue = getMobileType(subType);\n    }\n\n    return returnValue;\n  },\n  _androidNetworkType: function (result) {\n    var type = result.type;\n    var subType = result.subType;\n\n    if (type == 0) {\n      switch (subType) {\n        case 1:\n        case 2:\n        case 4:\n        case 7:\n        case 11:\n          return \"2g\";\n        case 3:\n        case 5:\n        case 6:\n        case 8:\n        case 9:\n        case 10:\n        case 12:\n        case 14:\n        case 15:\n          return \"3g\";\n        case 13:\n          return \"4g\";\n      }\n    }\n\n    if (type == 1) {\n      return \"wifi\";\n    } else {\n      return \"none\";\n    }\n  },\n  getNetworkType : function(opt) {\n    var self = this;\n    var _success = opt.success;\n\n    this._send(\"getNetworkType\", {\n      success: function(result) {\n        var ua = self._osUA;\n        var networkType;\n\n        switch (ua.name) {\n          case \"iphone\":\n            networkType = this._iOSNetworkType(result);\n            break;\n          case \"android\":\n            networkType = this._androidNetworkType(result);\n            break;\n        }\n\n        _success && _success({\n          networkType: networkType,\n          raw: {\n            type: result.type,\n            subType: result.subType\n          }\n        });\n      },\n      fail: opt.fail\n    });\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp-core/lib/network.js\n// module id = 38\n// module chunks = 2 3","module.exports = function mixin(to, from) {\n    for (var key in from) {\n        to[key] = from[key];\n    }\n    return to;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/util/mixin.js\n// module id = 39\n// module chunks = 2 3","'use strict';\n\nvar regexVer = /dp\\/com\\.dianping\\.[\\w\\.]+\\/([\\d\\.]+)/;\n\nvar getAppVersion = function (ua) {\n  var version;\n  var regexMAPI = /MApi/;\n  var match  = ua.match(regexVer);\n  if (match) {\n    version = match[1];\n  }else if (regexMAPI.test(ua)) {\n    version = '7.0.0';\n  }else{\n    version = 'web';\n  }\n  return version;\n};\nvar getOSName = function (ua) {\n  var regexAndroid = /android/i;\n  var regexIos = /ipad|iphone/i;\n  if (regexAndroid.test(ua)) {\n    return 'android';\n  }else if (regexIos.test(ua)) {\n    return 'ios';\n  }\n};\n\nvar getAdapterVersion = function (ua) {\n  if (ua.match(regexVer)) {\n    var reg = /adapter\\/([\\d\\.]+)/;\n    var match = ua.match(reg);\n    if (match) {\n      return match[1];\n    }\n  }\n};\n\nvar getWebviewVersion = function(ua) {\n  return getAdapterVersion(ua) || getAppVersion(ua);\n};\n\nvar appVersion = getAppVersion(navigator.userAgent);\nvar osName = getOSName(navigator.userAgent);\n\nmodule.exports = {\n  appVersion: appVersion,\n  getAppVersion: getAppVersion,\n  osName: osName,\n  getOSName: getOSName,\n  getWebviewVersion: getWebviewVersion,\n  actionMapping: function (method) {\n    return function (opt) {\n      this._send(method, opt);\n    };\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/util.js\n// module id = 40\n// module chunks = 2 3","module.exports = [\n  /*\n  * Common\n  */\n  \"getRequestId\", \n  \"isInstalledApp\",\n  /*\n  * DeviceInfo\n  */\n  \"getNetworkType\", \n  \"getVersion\",\n  /*\n  * UserInfos\n  */\n  \"getUserInfo\", \n  \"login\", \n  \"updateAccount\", \n  \"logout\",\n  \"thirdLogin\",\n  /*\n  * GeoInfos\n  */ \n  \"getCityId\", \n  \"getLocation\", \n  \"getCity\",\n  /*\n  * Common business\n  */\n  \"setPullDown\", \n  \"stopPullDown\", \n  \"openScheme\", \n  \"jumpToScheme\", \n  \"closeWindow\", \n  \"getContactList\", \n  \"sendSMS\", \n  \"bindPhone\",\n  \"ajax\", \n  \"setSpotlight\",\n  \"getHealthData\",\n  \"pickCity\",\n  \"analyticsTag\",\n  /*\n  * Storage\n  */\n  \"store\", \n  \"retrieve\",\n  /*\n  *  Picture\n  */\n  \"downloadImage\", \n  \"chooseImage\", \n  \"previewImage\",\n  \"uploadImage\",\n  /*\n  * Audio\n  */\n  \"playVoice\",\n  /*\n  * Share\n  */\n  \"share\",\n  /*\n  * Broadcast\n  */\n  \"publish\", \n  \"subscribe\", \n  \"unsubscribe\", \n\n  /*\n  * System widget\n  */\n  \"alert\", \n  \"prompt\", \n  \"confirm\", \n  \"actionSheet\", \n  /*\n  * System UI\n  */\n  \"setTitle\", \n  \"setBackgroundColor\", \n  \"setNavigationBarHidden\", \n  \"setScrollEnabled\",\n  \"setLLButton\", \n  \"setLRButton\", \n  \"setRLButton\", \n  \"setRRButton\", \n  \"setBouncesEnabled\",\n  \"setStatusBarStyle\",\n  /*\n    Other\n   */\n  \"setBarrageEnabled\",\n  /*\n  * Private\n  */\n  \"getCX\",\n  \"pay\"\n];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/apis.js\n// module id = 41\n// module chunks = 2 3","'use strict';\n\nvar _err = window.onerror;\nvar url = 'http://catdot.dianping.com/broker-service/api/js';\nwindow.onerror = function(err, file, line, col, error){\n  var e = encodeURIComponent;\n  var time = Date.now();\n  (new window.Image).src = url\n    + '?error=' + e(err)\n    + '&v=1'\n    + '&data=' + e(error && error.stack ? error.stack : '')\n    + '&url=' + e(location.href)\n    + '&file=' + e(file)\n    + '&line=' + e(line)\n    + '&col=' + e(col)\n    + '&timestamp=' + time;\n  _err && _err(err, file, line, col, error);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/errortrace.js\n// module id = 42\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\n\nmodule.exports = {\n  appVersion: '7.0',\n  _parseFeed: function(f){\n    var feed;\n    if (!f) {\n      return 0xff;\n    } else if (f.constructor.toString().indexOf('Array') >= 0) {\n      feed = [0, 0, 0, 0, 0, 0, 0, 0];\n      f.forEach(function(pos) {\n        feed[pos] = 1;\n      });\n      return parseInt(feed.join(''), 2);\n    }\n  },\n  share : function(opts){\n    opts.feed = this._parseFeed(opts.feed);\n    opts.url = this._tidyUrlParams(opts.url);\n    this._sendMessage('share', opts);\n  },\n  initShare: function(opt){\n    var success = opt.success;\n    var fail = opt.fail;\n    var src = 'dpshare://_?content=';\n    src += encodeURIComponent(JSON.stringify({\n      title: opt.title,\n      desc: opt.desc,\n      image: opt.image,\n      feed: this._parseFeed(opt.feed),\n      url: opt.url\n    }));\n    this.shareCallback = function(result){\n      if(result.status == 'success'){\n        success && success(result);\n      }else{\n        fail && fail(result);\n      }\n    };\n    this._createIframe(src);\n  },\n  getUA: function(opt) {\n    var success = opt && opt.success;\n    var appVersion = navigator.userAgent.match(/MApi\\s[\\w\\.]+\\s\\([\\w\\.\\d]+\\s([\\d\\.]+)/)[1];\n    var ua = {\n      platform: 'dpapp',\n      appName: 'dianping',\n      appVersion: appVersion,\n      osName: this._osUA.name,\n      osVersion: this._osUA.version\n    };\n    success && success(ua);\n    return ua;\n  },\n  ready: function(callback) {\n    this._isReady = true;\n    callback();\n  },\n  pay: function(args) {\n    var self = this;\n    var payType = args.payType;\n    var success = args.success;\n    var fail = args.fail;\n    var cx = args.cx;\n\n    function payOrder(data, callback) {\n      DPApp.ajax({\n        url: 'http://api.p.dianping.com/payorder.pay',\n        data: data,\n        keys: ['Content'],\n        success: function(paymsg) {\n          callback(null, paymsg);\n        },\n        fail: function() {\n          callback('fail payorder');\n        }\n      });\n    }\n\n    function getPaymentTool(payType) {\n      var PAY_TYPE_MINIALIPAY = 1;\n      var PAY_TYPE_WEIXINPAY = 7;\n      var PAYMENTTOOL_ALIPAY = '5:1:null#219#0';\n      var PAYMENTTOOL_WEIXINPAY = '11:1:null#217#0';\n      if (payType == PAY_TYPE_WEIXINPAY) {\n        paymentTool = PAYMENTTOOL_WEIXINPAY;\n      } else {\n        paymentTool = PAYMENTTOOL_ALIPAY;\n      }\n      return paymentTool;\n    }\n\n    payOrder({\n      token: args.token,\n      orderid: args.orderId,\n      paymenttool: getPaymentTool(payType),\n      cx: cx\n    }, function(err, paymsg) {\n      if (err) {\n        return fail && fail(err);\n      }\n\n      self._sendMessage('pay', {\n        paytype: payType,\n        paycontent: paymsg.Content\n      }, function(data) {\n        if (data.payresult) {\n          success && success(data);\n        } else {\n          fail && fail(data);\n        }\n      });\n    });\n  },\n  uploadImage: function(opts) {\n    var fail = opts.fail;\n    var handle = opts.handle;\n\n    this._sendMessage('uploadImage', opts, function(result) {\n      var status = result.status;\n      if (status == 'fail') {\n        fail && fail(result);\n        return;\n      } else {\n        handle && handle(result);\n      }\n    });\n  },\n  ajax: function(args) {\n    args = this._sanitizeAjaxOpts(args);\n    var _success = args.success;\n    args.success = function(e) {\n      var result = JSON.parse(e.mapiResult);\n      result = this._transModel(args.keys, result);\n      _success(result);\n    };\n\n    this._send('mapi', args);\n  },\n  getCX: util.actionMapping('getCX'),\n  getContactList: util.actionMapping('getContactList'),\n  getRequestId: util.actionMapping('getRequestId'),\n  closeWindow: util.actionMapping('close_web'),\n  getUserInfo: util.actionMapping('getUserInfo'),\n  getCity: util.actionMapping('getCityId'),\n  getCityId: util.actionMapping('getCityId'),\n  getLocation: util.actionMapping('getLocation')\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-7.0.0.js\n// module id = 43\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\nvar core = require('../core');\nvar patch7  = require('./patch-7.0.0');\n\n//更新的API: share, initShare, closeWindow, _parseFeed\n//新增的API: setTitle等\nvar newAPIs = [\n    'setLLButton', \n    'setLRButton', \n    'setRLButton', \n    'setRRButton',\n    'setTitle',\n    'sendSMS',\n    'publish',\n    'closeWindow'\n  ];\n\nvar _events = {};\nvar pageEvents = ['appear', 'disappear', 'scroll'];\nfunction getPageMethodName(name) {\n  var result = 'on' + core._captal(name);\n  // fix for android 7.6.0\n  if (util.osName == 'android' && util.appVersion == '7.6.0' && /appear|disappear/.test(name)) {\n    result = name;\n  }\n  return result;\n}\n\nvar getUA = (function() {\n  var uastr = navigator.userAgent;\n  var appVersionMatch = uastr.match(/dp\\/[\\w\\.\\d]+\\/([\\d\\.]+)/);\n  var appVersion = appVersionMatch && appVersionMatch[1];\n  var matchPackageId = uastr.match(/dp\\/(com\\.dianping\\.\\w+)/);\n  var packageId = matchPackageId && matchPackageId[1];\n  var adapterMatch = uastr.match(/adapter\\/([\\d\\.]+)/);\n  var adapterVersion = adapterMatch && adapterMatch[1];\n\n  return function(opt) {\n    var success = opt && opt.success;\n    var ua = {\n      platform: 'dpapp',\n      appName: 'dianping',\n      packageId: packageId,\n      appVersion: appVersion,\n      osName: core._osUA.name,\n      osVersion: core._osUA.version,\n      adapterVersion: adapterVersion\n    };\n    success && success(ua);\n    return ua;\n  };\n})();\n\nvar Patch = module.exports = {\n  appVersion: '7.1.0',\n  pay: patch7.pay,\n  \n  uploadImage: patch7.uploadImage,\n  \n  getUA: getUA,\n\n  ready: function(callback) {\n    var self = this;\n    this._send('ready', {\n      success: function() {\n        self._isReady = true;\n        callback();\n      }\n    });\n  },\n\n  login: function(opt) {\n    var self = this;\n    var loginUser;\n\n    function getUser(callback) {\n      self.getUserInfo({\n        success: callback\n      });\n    }\n    getUser(function(result) {\n      if (result.token) {\n        opt.success && opt.success(result);\n      } else {\n        var loginEvent = 'loginSuccess';\n        var appearEvent = 'appear';\n\n        var loginSuccessHandler = function() {\n          getUser(function (user) {\n            loginUser = user;\n          });\n          self.unsubscribe({\n            action: loginEvent,\n            handle: loginSuccessHandler\n          });\n        };\n\n        self.subscribe({\n          action: loginEvent,\n          handle: loginSuccessHandler\n        });\n\n        var appearHandler = function () {\n          getUser(function (user) {\n            if (user && user.token) {\n              opt.success && opt.success(user);\n            }else{\n              opt.fail && opt.fail(user);\n            }\n            \n          });\n          self.unsubscribe({\n            action: appearEvent,\n            handle: appearHandler\n          });\n        };\n\n        self.subscribe({\n          action: appearEvent,\n          handle: appearHandler\n        }); \n\n        self.openScheme({\n          url: 'dianping://login'\n        });\n      }\n    });\n  },\n  updateAccount: function(opt) {\n    opt = opt || {};\n    var self = this;\n    var dper = document.cookie.match(/dper=\\w+/);\n    if (dper) {\n      dper = dper[0].split('=')[1];\n    }\n\n    if (opt.dper) {\n      dper = opt.dper;\n    }\n\n    if (!dper) {\n      return opt.fail && opt.fail('Missing dper');\n    }\n    var _loopGetUserInfo = function(success, fail) {\n      var retries = 0;\n      function loopGetUserInfo() {\n        self.getUserInfo({\n          success: function(info) {\n            if (info.token) {\n              success && success(info);\n            } else {\n              if (retries > 5) {\n                fail && fail();\n              } else {\n                retries++;\n                setTimeout(function() {\n                  loopGetUserInfo();\n                }, 100);\n              }\n            }\n          }\n        });\n      }\n      loopGetUserInfo();\n    };\n\n    self.ajax({\n      url: 'http://m.api.dianping.com/mlogin/convertdper.api',\n      data: {\n        dper: dper\n      },\n      keys: ['Token', 'NewToken'],\n      success: function(result) {\n        var ua = self.getUA();\n        if (self.Semver.gte(ua.appVersion, '7.5.0')) {\n          self._send('updateAccount', {\n            token: result.Token,\n            newtoken: result.NewToken,\n            success: function() {\n              self.getUserInfo({\n                success: opt.success\n              });\n            },\n            fail: opt.fail\n          });\n        } else {\n          self._send('loginsuccess', {\n            token: result.Token,\n            newtoken: result.NewToken\n          });\n\n          _loopGetUserInfo(opt.success, opt.fail);\n        }\n      },\n      fail: opt.fail\n    });\n  },\n  _parseFeed: function(f){\n    var feed;\n    if (!f) {\n      return 0xff;\n    } else if (f.constructor.toString().indexOf('Array') >= 0) {\n      feed = [0, 0, 0, 0, 0, 0, 0, 0];\n      f.forEach(function(pos) {\n        feed[7 - pos] = 1;\n      });\n      return parseInt(feed.join(''), 2);\n    }\n  },\n  share: function(opt) {\n    opt.feed = this._parseFeed(opt.feed);\n    opt.url = this._tidyUrlParams(opt.url);\n    this._send('share', opt);\n  },\n  initShare: function(opt) {\n    var self = this;\n    this.setRRButton({\n      icon: 'H5_Share',\n      handle: function() {\n        opt.handle && opt.handle();\n        self.share({\n          title: opt.title,\n          desc: opt.desc,\n          content: opt.content,\n          image: opt.image,\n          feed: opt.feed,\n          url: opt.url,\n          success: opt.success,\n          fail: opt.fail\n        });\n      }\n    });\n  },\n  subscribe: function(opt) {\n    var name = opt.action;\n    var handle = opt.handle;\n\n    function mainHandler(e) {\n      _events[name] && _events[name].length && _events[name].forEach(function(func) {\n        func && func(e);\n      });\n    }\n\n    if (_events[name]) {\n      opt.success && opt.success();\n      _events[name].push(handle);\n    } else {\n      this._send('subscribe', {\n        action: name,\n        success: opt.success,\n        handle: mainHandler\n      });\n\n      _events[name] = [handle];\n    }\n  },\n\n  unsubscribe: function(opt) {\n    var name = opt.action;\n    var success = opt.success;\n    var handle = opt.handle;\n\n    var index = _events[name] ? _events[name].indexOf(handle) : -1;\n\n    if (index != -1) {\n      _events[name].splice(index, 1);\n      success && success();\n      if (!_events[name].length) {\n        _events[name] = null;\n      }\n    } else if (!handle) {\n      _events[name] = null;\n    }\n\n    if (!_events[name]) {\n      this._send('unsubscribe', {\n        action: name,\n        success: success\n      });\n    }\n  },\n\n  openScheme: function(opt) {\n    var url = opt.url;\n    var extra = opt.extra;\n    if (extra) {\n      url += '?' + this._convertUrlParams(extra);\n      delete opt.extra;\n      opt.url = url;\n    }\n    this._send('openScheme', opt);\n  }\n};\n\nnewAPIs.forEach(function (api) {\n  Patch[api] = util.actionMapping(api);\n});\n\npageEvents.forEach(function(name) {\n  Patch[getPageMethodName(name)] = function (){};\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-7.1.0.js\n// module id = 44\n// module chunks = 2 3","'use strict';\n\nmodule.exports = {\n  appVersion: '7.2.0',\n\n  jumpToScheme: function(opt) {\n    var url = opt.url;\n    var extra = opt.extra;\n    if (extra) {\n      url += '?' + this._convertUrlParams(extra);\n      delete opt.extra;\n      opt.url = url;\n    }\n    opt.toHome = !!opt.toHome ? 1 : 0;\n    this._send('jumpToScheme', opt);\n  },\n  publish: function(opt) {\n    var bizname = this._getBizName(opt);\n    var CONSTS = ['phoneChanged', 'AccountBindChange'];\n    if (bizname) {\n      if (CONSTS.indexOf(opt.action) == -1) {\n        opt.action = bizname + ':' + opt.action;\n      }\n      this._send('publish', opt);\n    }\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-7.2.0.js\n// module id = 45\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\n\nmodule.exports = {\n  appVersion: '7.5.0',\n  \n  store: function(opt) {\n    var bizname = this._getBizName(opt);\n    if (bizname) {\n      opt.key = bizname + ':' + opt.key;\n      this._send('store', opt);\n    }\n  },\n  retrieve: function(opt) {\n    var bizname = this._getBizName(opt);\n    if (opt.key.indexOf(':') === -1) {\n      opt.key = bizname + ':' + opt.key;\n    }\n    this._send('retrieve', opt);\n  },\n  setBackgroundColor: util.actionMapping('setBackgroundColor')\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-7.5.0.js\n// module id = 46\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\nvar core = require('../core');\n\nvar _events = {};\nvar pageEvents = ['appear', 'disappear', 'scroll'];\nfunction getPageMethodName(name) {\n  var result = 'on' + core._captal(name);\n  // fix for android 7.6.0\n  if (util.osName == 'android' && util.appVersion == '7.6.0' && /appear|disappear/.test(name)) {\n    result = name;\n  }\n  return result;\n}\n\nmodule.exports = {\n  appVersion: '7.6.0',\n  \n  isInstalledApp: util.actionMapping('isInstalledApp'),\n\n  subscribe: function(opt) {\n    var self = this;\n    var name = opt.action;\n    var handle = opt.handle;\n    var messageName;\n\n    function mainHandler(e) {\n      _events[name] && _events[name].length && _events[name].forEach(function(func) {\n        func && func(e);\n      });\n    }\n\n    function registerPageEvents() {\n      if (messageName) {\n        window.DPApp && (window.DPApp[getPageMethodName(name)] = mainHandler);\n        opt.success && opt.success();\n      }\n    }\n\n    if (_events[name]) {\n      opt.success && opt.success();\n      _events[name].push(handle);\n    } else {\n      if (pageEvents.indexOf(name) !== -1) {\n        messageName = 'on' + self._captal(name);\n        if (name == 'scroll') {\n          // 仅scroll事件需要toggle开关\n          this._send(messageName, {\n            success: registerPageEvents\n          });\n        } else {\n          // 不然就直接注册上了\n          registerPageEvents();\n        }\n      } else {\n        this._send('subscribe', {\n          action: name,\n          success: opt.success,\n          handle: mainHandler\n        });\n      }\n\n      _events[name] = [handle];\n    }\n  },\n\n  unsubscribe: function(opt) {\n    var name = opt.action;\n    var success = opt.success;\n    var handle = opt.handle;\n    var self = this;\n\n    var index = _events[name] ? _events[name].indexOf(handle) : -1;\n\n    function unregisterPageEvents() {\n      self[callbackName] = function () {};\n    }\n\n    if (index != -1) {\n      _events[name].splice(index, 1);\n      success && success();\n      if (!_events[name].length) {\n        _events[name] = null;\n      }\n    } else if (!handle) {\n      _events[name] = null;\n    }\n\n    if (!_events[name]) {\n      // unregister\n      // if is page event\n      if (pageEvents.indexOf(name) !== -1) {\n        var messageName = 'off' + self._captal(name);\n        var callbackName = 'on' + self._captal(name);\n        // 与安卓确认\n        if (name == 'scroll') {\n          this._send(messageName, {\n            success: unregisterPageEvents\n          });\n        } else {\n          unregisterPageEvents();\n        }\n      } else {\n        this._send('unsubscribe', {\n          action: name,\n          success: success\n        });\n      }\n    }\n  },\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-7.6.0.js\n// module id = 47\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\n\nvar apis = ['alert', 'confirm', 'actionSheet', 'prompt', 'setPullDown', 'stopPullDown', 'downloadImage'];\nvar core = {\n    appVersion: '7.8.0'\n};\n\napis.forEach(function(api) {\n    var fn = util.actionMapping(api);\n    core[api] = fn;\n});\ncore.prompt = function(opt) {\n    if (!opt.placeholder) {\n        opt.placeholder = '';\n    }\n    if (util.osName === 'ios') {\n        // FIX: message参数有bug，暂时不加入filterList\n        var filterList = ['title', 'placeholder', 'okButton', 'cancelButton', 'success', 'fail'];\n        var optKeys = Object.keys(opt);\n        for (var i = 0; i < optKeys.length; i++) {\n            var key = optKeys[i];\n            if (!~filterList.indexOf(key)) {\n                delete opt[key];\n            }\n        }\n    }\n    this._send('prompt', opt);\n};\n\nmodule.exports = core;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-7.8.0.js\n// module id = 48\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\nvar async = require('../async');\nvar core = require('../core');\n\nmodule.exports = {\n  appVersion: '7.9.1',\n  \n  setNavigationBarHidden: util.actionMapping('setNavigationBarHidden'),\n\n  chooseImage: function(opt) {\n    opt = opt || {};\n    opt.count = (!opt.count || opt.count > 9 || opt.count < 1) ? 9 : opt.count;\n    this._send('chooseImage', opt);\n  },\n  uploadImage: function(opts) {\n    var success = opts.success;\n    var fail = opts.fail;\n    var handle = opts.handle;\n    var ua = this.getUA();\n    var self = this;\n    if (opts.localId || opts.localIds) {\n      if (core.Semver.gte(ua.adapterVersion || ua.appVersion, '7.9.1')) {\n        if (opts.localIds) {\n          (function(ids) {\n            var picKeys = {};\n            var photoInfos = [];\n            async.mapSeries(ids, function(id, done){\n              self._send('uploadPhoto', {\n                localId: id,\n                success: function(e){\n                  picKeys[id] = e.picKey;\n                  photoInfos.push({\n                    localId: id,\n                    picKey: e.picKey//FIX BUG, What 'picKey' mean?\n                  });\n                  done(null);\n                },\n                fail: function(e){\n                  done(e);\n                }\n              });\n            }, function(e){\n              if(e){\n                fail && fail(e);\n              }else{\n                success && success({\n                  picKeys: picKeys,\n                  photoInfos: photoInfos\n                });\n              }\n            });\n          })(opts.localIds);\n        } else {\n          this._send('uploadPhoto', opts);\n        }\n      } else {\n        fail({\n          errMsg: 'ERR_NOT_IMPLEMENTED'\n        });\n      }\n    } else {\n      this._sendMessage('uploadImage', opts, function(result) {\n        var status = result.status;\n        if (status == 'fail') {\n          fail && fail(result);\n          return;\n        } else {\n          handle && handle(result);\n        }\n      });\n    }\n  },\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-7.9.1.js\n// module id = 49\n// module chunks = 2 3","'use strict';\n\nexports.mapSeries = function(items, process, callback) {\n    var count = items.length;\n    var current = 0;\n    var results = [];\n\n    function done(err, result) {\n        if (err) {\n            return callback(err);\n        }\n\n        current++;\n        results.push(result);\n        if(current !== count){\n            process(items[current], done);\n        }else{\n            callback(null, results);\n        }\n    }\n\n    process(items[current], done);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/async.js\n// module id = 50\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\n\nmodule.exports = {\n  appVersion: '7.9.2',\n  \n  previewImage: util.actionMapping('previewImage')\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-7.9.2.js\n// module id = 51\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\n\nmodule.exports = {\n  appVersion: '7.9.4',\n  setSpotlight: function (opt) {\n    if (!opt.webpageURL) {\n      return;\n    }\n    if (!opt.scheme) {\n      opt.scheme = 'dianping://web?url=' + encodeURIComponent(opt.webpageURL);\n    }\n    this._send('setSpotlight', opt);\n  },\n  playVoice: util.actionMapping('playVoice')\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-7.9.4.js\n// module id = 52\n// module chunks = 2 3","'use strict';\n\nmodule.exports = {\n  appVersion: '7.9.6',\n\n  logout: function (opt) {\n    var url;\n    if (opt.type === 1) {\n      url = 'dianping://me';\n    }else if (opt.type === 2) {\n      url = 'dianping://home';\n    }\n    if (url) {\n      opt.success = function () {\n        this.openScheme({\n          url: url\n        });\n      };      \n    }\n    this._send('logout', opt);\n  },\n  login: function (opt) {\n    var self = this;\n    function getUser(callback) {\n      self.getUserInfo({\n        success: callback\n      });\n    }\n    // 先强制退出登录\n    this.logout({\n      type: 0,\n      success: function() {\n        // 注册事件\n        var appearEvent = 'appear';\n        // FIXME: loginSuccess 然并卵: 取消登录、已登录情况下不会发此通知，正常登录回调方法处理结果比appear慢！\n        // var loginEvent = 'loginSuccess';\n        var appearHandler = function () {\n          getUser(function (user) {\n            if (user && user.token) {\n              console.log('login success');\n              opt.success && opt.success(user);\n            }else{\n              console.log('login fail');\n              opt.fail && opt.fail(user);\n            }\n          });\n          self.unsubscribe({\n            action: appearEvent,\n            handle: appearHandler\n          });\n        };\n\n        self.subscribe({\n          action: appearEvent,\n          handle: appearHandler\n        });\n\n        // 打开登录页\n        self.openScheme({\n          url: 'dianping://login'\n        });\n      }\n    });\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-7.9.6.js\n// module id = 53\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\n\nmodule.exports = {\n  appVersion: '8.0.0',\n\n  setScrollEnabled: util.actionMapping('setScrollEnabled'),\n  setBouncesEnabled: util.actionMapping('setBouncesEnabled'),\n\n  bindPhone: util.actionMapping('bindPhone'),\n  pay: util.actionMapping('pay')\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-8.0.0.js\n// module id = 54\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\n\nvar core = {\n  appVersion: '8.0.4',\n  thirdLogin: function(opt) {\n    var type = opt.type;\n    var url;\n    switch (type){\n      case 1:\n        url = 'http://m.dianping.com/auth/app?ft=15&sso=true';\n        break;\n      case 2:\n        url = 'http://m.dianping.com/auth/app?ft=6&sso=true&redir=';\n        break;\n      case 3:\n        url = 'http://m.dianping.com/auth/app?ft=5&ssp=true&redir=';\n        break;\n      case 4:\n        url = 'http://m.dianping.com/auth/app?ft=2&source=1&sso=true&redir=';\n        break;\n    }\n    this.openScheme({\n      url: 'dianping://loginweb?url=' + encodeURIComponent(url) + '&isFromNative=true',\n    });\n  },\n  getCX: function(opt) {\n    var success = opt.success;\n    opt.success = function(res) {\n      if (res.fingerprint) {\n        res.cx = res.fingerprint;\n      }\n      success(res);\n    }\n    this._send('getCX', opt);\n  },\n  uploadImage: function(opts) {\n    var success = opts.success;\n    var fail = opts.fail;\n    var handle = opts.handle;\n\n    if (opts.localId || opts.localIds) {\n\n      //兼容业务对localId单图上传的支持\n      if (opts.localId) {\n        opts.localIds = [opts.localId];\n        delete opts.localId;\n      }\n      \n      opts.success = function(res) {\n        var obj = {};\n        var _localId;\n        if (res.ret) {\n          res.ret.forEach(function(picItem, index) {\n            picItem.localId = picItem.localId || opts.localIds[index];\n            \n            _localId = picItem.localId;\n            obj[_localId] = picItem.picKey;\n          });\n          res.photoInfos = res.ret;\n          delete res.ret;\n        }\n        res.picKeys = obj;\n        success(res);\n      };\n\n      this._send('uploadPhoto', opts); \n\n    } else {\n      this._sendMessage('uploadImage', opts, function(result) {\n        var status = result.status;\n        if (status == 'fail') {\n          fail && fail(result);\n          return;\n        } else {\n          handle && handle(result);\n        }\n      });\n    }\n  }\n};\nif (util.osName === 'ios') {//getOSName()\n  core.setStatusBarStyle = function(opt) {\n    if (opt.style === undefined) {\n      opt.style = 0;\n    }\n    this._send('setStatusBarStyle', opt);\n  }\n}\nmodule.exports = core;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-8.0.4.js\n// module id = 55\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\n\nmodule.exports = {\n  appVersion: '8.0.6',\n\n  share: function(opts) {\n    //直接分享渠道计数从1开始\n    if (opts.shareType !== undefined) {\n      if (util.osName === 'android') {\n        //Android下兼容shareType从1开始计数\n        opts.shareType += 1;\n      }\n    }\n    opts.feed = this._parseFeed(opts.feed);\n    opts.url = this._tidyUrlParams(opts.url);\n    \n    this._send('share', opts);\n  }\n\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-8.0.6.js\n// module id = 56\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\n\nvar core = {\n    appVersion: '8.1.0'\n};\n\nif (util.osName === 'ios') {\n    core.getHealthData = function(opts) {\n        if (!opts) return;\n        // 目前支持的类型\n        var typeList = [1];\n        var type = opts.quantityType;\n        var fail = opts.fail;\n        // valid\n        if (~typeList.indexOf(type)) {\n            _handleDate(opts) && this._send('getHealthData', opts);\n        } else {\n            typeof fail == 'function' && fail('type error');\n        }\n\n        function _handleDate(opts) {\n            var start = opts.startDate;\n            var end = opts.endDate || new Date();\n            var fail = opts.fail;\n\n            start = +new Date(start);\n            end = +new Date(end);\n            if (start < end) {\n                // 单位：秒\n                opts.startDate = Math.round(start / 1000);\n                opts.endDate = Math.round(end / 1000);\n                return true;\n            } else {\n                typeof fail == 'function' && fail('date error');\n            }\n        }\n    };\n    core.prompt = function(opt) {\n        if (!opt.placeholder) {\n            opt.placeholder = '';\n        }\n        this._send('prompt', opt);\n    };\n}\n\nmodule.exports = core;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-8.1.0.js\n// module id = 57\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\n\nmodule.exports = {\n  appVersion: '8.1.2',\n\n  share: function(opts) {\n    \n    opts.feed = this._parseFeed(opts.feed);\n    opts.url = this._tidyUrlParams(opts.url);\n    \n    this._send('share', opts);\n  },\n  setBarrageEnabled: function(opts) {\n    this._send('setBarrageEnabled',opts);\n  }\n\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-8.1.2.js\n// module id = 58\n// module chunks = 2 3","'use strict';\nvar util = require('../util');\nvar batchAPI = [\n    'setLLButton',\n    'setLRButton',\n    'setRLButton',\n    'setRRButton'\n];\n\nvar Core = module.exports = {\n    appVersion: '8.1.4',\n    publish: function(opt) {\n        var bizname = this._getBizName(opt);\n        var CONSTS = ['phoneChanged', 'AccountBindChange'];\n        if (/2Native/i.test(opt.type) || ~CONSTS.indexOf(opt.action)) {\n            delete opt.type;\n            this._send('publish', opt);\n        } else if (bizname) {\n            opt.action = bizname + ':' + opt.action;\n            delete opt.type;\n            this._send('publish', opt);\n        }\n    }\n};\n\nbatchAPI.forEach(function (api) {\n  Core[api] = _actionMapping(api);\n});\n\nfunction _actionMapping(method) {\n    return function (opt) {\n        if (opt && opt.icon) {\n            opt.icon = _convertIcon(opt.icon);\n        }\n        this._send(method, opt);\n    };\n}\n\nfunction _convertIcon(icon) {\n    var mapList = {\n        'H5_Favorite_On': 'ic_action_favorite_on_normal',\n        'H5_Favorite_Off': 'ic_action_favorite_off_normal'\n    };\n    if (/android/i.test(util.osName)) {\n        return mapList[icon] || icon;\n    }\n    return icon;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-8.1.4.js\n// module id = 59\n// module chunks = 2 3","var util = require('../util');\n\nvar Patch = {\n\tappVersion: '8.1.6',\n\tpickCity: function(opts) {\n\t\tvar type = opts && opts.type;\n\t\tif (type === undefined || type == 0 || type == 1) {\n\t\t\tthis._send('pickCity', opts);\n\t\t} else {\n\t\t\tconsole.log('param error');\n\t\t\ttypeof opts.fail == 'function' && opts.fail();\n\t\t}\n\t},\n\tanalyticsTag: function(opts) {\n\t\tif (opts && opts.channel && opts.key && opts.value) {\n\t\t\ttypeof opts.value == 'string' || (opts.value = JSON.stringify(opts.value));\n\t\t\tthis._send('analyticsTag', opts);\n\t\t} else {\n\t\t\tconsole.log('param error');\n\t\t\ttypeof opts.fail == 'function' && opts.fail();\n\t\t}\n\t},\n\tgetNetworkType: function(opts) {\n\t\tthis._send('getNetworkType',opts);\n\t}\n};\n\nif (util.osName === 'ios') {\n\tPatch.setPullDown = function(opts) {\n\t\tvar callCount = 0;\n\t\tvar success = opts.success;\n\t\topts.success = function(res) {\n\t\t\t//解决8.1.6 ios下无法区分success和handle事件的BUG\n\t\t\tcallCount++;\n\t\t\tif (callCount > 1) {\n\t\t\t\topts.handle(res);\n\t\t\t}else{\n\t\t\t\tsuccess(res);\n\t\t\t}\n\t\t}\n\t\tthis._send('setPullDown',opts);\n\t\t\n\t}\n}\n\nmodule.exports = Patch;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/patch/patch-8.1.6.js\n// module id = 60\n// module chunks = 2 3","module.exports = (\"1.6.5\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/version.js\n// module id = 61\n// module chunks = 2 3","module.exports = (\"cortex\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/dpapp/lib/type.js\n// module id = 62\n// module chunks = 2 3"],"sourceRoot":""}