{"version":3,"sources":["webpack:///./~/@dp/weixin-js-sdk-loader/index.js"],"names":[],"mappings":";;;;;AAAA;;;AAGA;AACA;AACA;AACA,UAAS,qDAAqD;AAC9D,UAAS,kDAAkD;AAC3D,UAAS;AACT;AACA,cAAa;AACb;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,cAAa,E;AACb;;AAEA,MAAK;;AAEL,G","file":"1.build.js","sourcesContent":["'use strict';\n\n\nvar defaults = {\n    url: '//res.wx.qq.com/open/js/jweixin-1.0.0.js', //微信JSSDK的URL\n    configHostnameMap: [ //配置wx的js与域名的映射关系\n        { pattern: /dianping.com$/, host: 'cps.dianping.com' },\n        { pattern: /51ping.com$/, host: 'tcps.51ping.com' },\n        { pattern: /.meituan.com$/, host: 'i.meituan.com/firework/api'}\n    ],\n    config: { //默认配置\n        debug: false\n    },\n    onError: function (msg) {\n        console && console.error && console.error(msg);\n    }\n};\n\nvar isLoaded = false;\n\nvar isLoading = false;\n\nvar callbackQueue = [];\n\nvar loadScript = function (src, onload) {\n    var script = document.createElement('script');\n    script.src = src;\n    script.onload = onload;\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\n};\n\n\nexports.use = function (callback) {\n    var options = defaults;\n    if (/[\\?&]debug:wx($|&)/.test(window.location.search)) {\n        options.config.debug = true;\n    }\n\n    if (isLoaded) {\n        return callback(window.wx);\n    }\n\n    callbackQueue.push(callback);\n\n    if (isLoading) {\n        return;\n    }\n\n    isLoading = true;\n\n    var configHostname = options.configHostnameMap[0].host;\n    options.configHostnameMap.forEach(function (item) {\n        if (item.pattern.test(location.hostname))\n            configHostname = item.host;\n    });\n\n    var apis = 'checkJsApi,onMenuShareTimeline,onMenuShareAppMessage,onMenuShareQQ,onMenuShareWeibo,onMenuShareQZone,startRecord,stopRecord,onVoiceRecordEnd,playVoice,pauseVoice,stopVoice,onVoicePlayEnd,uploadVoice,downloadVoice,chooseImage,previewImage,uploadImage,downloadImage,translateVoice,getNetworkType,openLocation,getLocation,hideOptionMenu,showOptionMenu,hideMenuItems,showMenuItems,hideAllNonBaseMenuItem,showAllNonBaseMenuItem,closeWindow,scanQRCode,chooseWXPay,openProductSpecificView,addCard,chooseCard,openCard';\n    var configSearch = '?apis='+ apis;\n    Object.keys(options.config).forEach(function (name) {\n        configSearch += '&';\n        configSearch += encodeURIComponent(name);\n        configSearch += '=';\n        configSearch += encodeURIComponent(options.config[name]);\n    });\n\n    loadScript(options.url,function() {\n        var doCallback = function() {\n            isLoaded = true;\n            callbackQueue.forEach(function (cb) {\n                cb && cb(window.wx);\n            });\n        };\n\n        if (configHostname.indexOf('i.meituan.com')!==-1) {\n            window.jsonpWXLoader = function(res) {\n                var config = {\n                    debug: options.config.debug,\n                    appId: 'wxc72f01f43da0083b',\n                    timestamp: res.data.timestamp,\n                    signature: res.data.signature,\n                    nonceStr: res.data.nonceStr,\n                    jsApiList: apis.split(',')\n                };\n                wx.config(config);\n                doCallback();\n            }\n            loadScript('//' + configHostname + '/weixin/config.json?url='+encodeURIComponent(location.href)+'&callback=jsonpWXLoader');\n        }else{\n            loadScript('//' + configHostname + '/weixin/config.js' + configSearch, function () {\n                doCallback();\n            });            \n        }\n\n    });\n\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@dp/weixin-js-sdk-loader/index.js\n// module id = 16\n// module chunks = 1"],"sourceRoot":""}