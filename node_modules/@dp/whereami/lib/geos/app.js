//主app js bridge定位
var isInApp = function () {
    return ~navigator.userAgent.indexOf("dianping");
};


module.exports = function (suc, fail, next) {
    if (!isInApp()) {
        next();
    } else {
        require.ensure([], function (require) {
            var dpapp = require("@dp/dpapp");
            dpapp.ready(function () {
                dpapp.getLocation({
                    success: function (e) {
                        suc({
                            lat: e.lat,
                            lng: e.lng
                        });
                    },
                    fail: fail
                });
            });
        });
    }


};

module.exports.type = "app";